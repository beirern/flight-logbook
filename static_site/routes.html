
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Routes Map - Flight Logbook</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=JetBrains+Mono:wght@400;600&family=Archivo:wght@600;700;900&display=swap" rel="stylesheet">

    <!-- Custom CSS -->
    
    <link rel="stylesheet" href="assets/css/dashboard.css">
    

    
<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""/>
<style>
    #map {
        height: 600px;
        width: 100%;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .route-info {
        background-color: #f8f9fa;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
    }
</style>

</head>
<body>
    <!-- Navigation Bar -->
    <nav class="modern-nav">
        <div class="nav-container">
            <div class="nav-brand-section">
                
                <a class="logo" href="index.html">FLIGHT LOG</a>
                
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="nav-links">
                    <li>
                        
                        <a class="" href="index.html">Dashboard</a>
                        
                    </li>
                    <li>
                        
                        <a class="active" href="routes.html">Routes</a>
                        
                    </li>
                    <li>
                        
                        <a class="" href="people.html">People</a>
                        
                    </li>
                    <li>
                        
                        <a class="" href="aircraft.html">Aircraft</a>
                        
                    </li>
                    <li>
                        
                        <a class="" href="logbook.html">Logbook</a>
                        
                    </li>
                    
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-container">
        
<div class="container-fluid">
    <div class="page-header">
        <div class="d-flex justify-content-between align-items-center">
            <h1>Flight Routes Map</h1>
            
            <small class="text-muted">Last updated: 2026-01-18 20:47:47Z</small>
            
        </div>
    </div>

    
    <!-- Unique Routes Info -->
    <div class="route-info">
        <p class="mb-0">
            <strong>Unique routes:</strong>
            <span id="route-count">Loading...</span>
        </p>
    </div>

    <!-- Routes Map -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0">Routes Map</h5>
        </div>
        <div class="card-body">
            <div id="map"></div>
        </div>
    </div>

    <!-- Routes Table -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0">Routes Table</h5>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>Route</th>
                            <th>Flights</th>
                            <th>Distance (NM)</th>
                        </tr>
                    </thead>
                    <tbody id="routes-table-body">
                        <tr>
                            <td colspan="3" class="text-center">Loading...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- Pagination Controls -->
            <nav aria-label="Routes pagination">
                <ul class="pagination justify-content-center mb-0" id="pagination">
                </ul>
            </nav>
        </div>
    </div>

    <!-- Airport Departure Progression Chart -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0">Airport Departure Progression</h5>
        </div>
        <div class="card-body">
            <canvas id="airportProgressionChart"></canvas>
        </div>
    </div>
    
</div>

    </main>

    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- Chart.js Date Adapter -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>

    <!-- Chart.js Annotation Plugin -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>

    
<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin=""></script>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>

<script>
    // Initialize variables
    let allRoutes = [];
    let currentPage = 1;
    const routesPerPage = 5;

    // Initialize the map
    const map = L.map('map').setView([47.6062, -122.3321], 8); // Default to Seattle area

    // Add OpenStreetMap tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
        maxZoom: 19
    }).addTo(map);

    function renderRoutes(routes) {
        if (!routes || routes.length === 0) {
            document.getElementById('route-count').textContent = '0';
            document.getElementById('routes-table-body').innerHTML = '<tr><td colspan="3" class="text-center">No routes found</td></tr>';
            return;
        }

        allRoutes = routes;
        document.getElementById('route-count').textContent = routes.length;

        // Sort routes by distance (descending)
        allRoutes.sort((a, b) => b.distance - a.distance);

        // Render table and pagination
        renderTable();
        renderPagination();

        // Render map
        renderMap();
    }

    function renderTable() {
        const start = (currentPage - 1) * routesPerPage;
        const end = start + routesPerPage;
        const pageRoutes = allRoutes.slice(start, end);

        const tbody = document.getElementById('routes-table-body');
        tbody.innerHTML = '';

        pageRoutes.forEach(route => {
            const row = document.createElement('tr');
            const flightText = route.flight_count === 1 ? 'flight' : 'flights';

            row.innerHTML = `
                <td>${route.name}</td>
                <td>${route.flight_count} ${flightText}</td>
                <td>${route.distance} NM</td>
            `;

            tbody.appendChild(row);
        });
    }

    function renderPagination() {
        const totalPages = Math.ceil(allRoutes.length / routesPerPage);
        const pagination = document.getElementById('pagination');
        pagination.innerHTML = '';

        if (totalPages <= 1) {
            return;
        }

        // Previous button
        const prevLi = document.createElement('li');
        prevLi.className = `page-item ${currentPage === 1 ? 'disabled' : ''}`;
        prevLi.innerHTML = `<a class="page-link" href="#" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>`;
        if (currentPage > 1) {
            prevLi.querySelector('a').addEventListener('click', (e) => {
                e.preventDefault();
                currentPage--;
                renderTable();
                renderPagination();
            });
        }
        pagination.appendChild(prevLi);

        // Page numbers
        for (let i = 1; i <= totalPages; i++) {
            const li = document.createElement('li');
            li.className = `page-item ${i === currentPage ? 'active' : ''}`;
            li.innerHTML = `<a class="page-link" href="#">${i}</a>`;

            li.querySelector('a').addEventListener('click', (e) => {
                e.preventDefault();
                currentPage = i;
                renderTable();
                renderPagination();
            });

            pagination.appendChild(li);
        }

        // Next button
        const nextLi = document.createElement('li');
        nextLi.className = `page-item ${currentPage === totalPages ? 'disabled' : ''}`;
        nextLi.innerHTML = `<a class="page-link" href="#" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>`;
        if (currentPage < totalPages) {
            nextLi.querySelector('a').addEventListener('click', (e) => {
                e.preventDefault();
                currentPage++;
                renderTable();
                renderPagination();
            });
        }
        pagination.appendChild(nextLi);
    }

    function renderMap() {
        // Create a bounds object to fit all routes
        const bounds = L.latLngBounds();

        // Define colors for routes (cycling through them)
        const colors = ['#3388ff', '#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24', '#6c5ce7', '#fd79a8'];

        allRoutes.forEach((route, index) => {
            if (!route.waypoints || route.waypoints.length === 0) {
                return;
            }

            const color = colors[index % colors.length];

            // Create coordinates array for the polyline
            const coordinates = route.waypoints.map(wp => [wp.lat, wp.lon]);

            // Add route line
            const polyline = L.polyline(coordinates, {
                color: color,
                weight: 3,
                opacity: 0.7
            }).addTo(map);

            // Bind tooltip (hover) and popup (click) to the polyline with flight count
            const flightText = route.flight_count === 1 ? 'flight' : 'flights';
            const tooltipContent = `${route.name} (${route.flight_count} ${flightText})`;
            const popupContent = `
                <strong>${route.name}</strong><br>
                <small>Flown ${route.flight_count} ${flightText}</small><br>
                <small>Distance: ${route.distance} NM</small>
            `;

            polyline.bindTooltip(tooltipContent);
            polyline.bindPopup(popupContent);

            // Add markers for waypoints
            route.waypoints.forEach((waypoint, wpIndex) => {
                const marker = L.circleMarker([waypoint.lat, waypoint.lon], {
                    radius: 6,
                    fillColor: color,
                    color: '#fff',
                    weight: 2,
                    opacity: 1,
                    fillOpacity: 0.8
                }).addTo(map);

                const visitText = waypoint.visit_count === 1 ? 'visit' : 'visits';
                const markerTooltip = `${waypoint.code} (${waypoint.visit_count} ${visitText})`;
                const markerPopup = `
                    <strong>${waypoint.code}</strong><br>
                    ${waypoint.name}<br>
                    <small>${waypoint.lat.toFixed(4)}, ${waypoint.lon.toFixed(4)}</small><br>
                    <small><strong>${waypoint.visit_count}</strong> ${visitText}</small>
                `;

                marker.bindTooltip(markerTooltip);
                marker.bindPopup(markerPopup);

                // Extend bounds
                bounds.extend([waypoint.lat, waypoint.lon]);
            });
        });

        // Fit map to show all routes
        if (bounds.isValid()) {
            map.fitBounds(bounds, { padding: [50, 50] });
        }
    }

    // Parse routes data from Django template
    
    // In static mode, fetch from JSON file
    fetch('data/routes.json')
        .then(response => response.json())
        .then(routes => {
            renderRoutes(routes);
        })
        .catch(error => {
            console.error('Error loading routes:', error);
        });
    

    // Airport Departure Progression Chart
    const airportProgressionCtx = document.getElementById('airportProgressionChart');
    
    const airportProgressionData = {"airports": {"KRNT": {"name": "KRNT", "data": [{"x": "2021-04-05", "y": 1}, {"x": "2023-08-16", "y": 2}, {"x": "2023-11-02", "y": 3}, {"x": "2024-03-27", "y": 4}, {"x": "2024-03-28", "y": 5}, {"x": "2024-04-02", "y": 6}, {"x": "2024-04-03", "y": 7}, {"x": "2024-04-05", "y": 8}, {"x": "2024-04-10", "y": 9}, {"x": "2024-04-30", "y": 10}, {"x": "2024-05-09", "y": 11}, {"x": "2024-05-30", "y": 12}, {"x": "2024-06-10", "y": 13}, {"x": "2024-06-24", "y": 14}, {"x": "2024-07-09", "y": 15}, {"x": "2024-07-11", "y": 16}, {"x": "2024-07-12", "y": 17}, {"x": "2024-07-15", "y": 18}, {"x": "2024-07-16", "y": 19}, {"x": "2024-07-17", "y": 20}, {"x": "2024-07-24", "y": 21}, {"x": "2024-07-31", "y": 22}, {"x": "2024-08-05", "y": 23}, {"x": "2024-08-07", "y": 24}, {"x": "2024-08-10", "y": 25}, {"x": "2024-08-12", "y": 27}, {"x": "2024-08-19", "y": 28}, {"x": "2024-08-21", "y": 29}, {"x": "2024-08-25", "y": 30}, {"x": "2024-08-26", "y": 31}, {"x": "2024-08-27", "y": 32}, {"x": "2024-08-28", "y": 33}, {"x": "2025-01-25", "y": 33}, {"x": "2025-02-17", "y": 33}, {"x": "2025-02-19", "y": 33}, {"x": "2025-03-10", "y": 33}, {"x": "2025-03-21", "y": 33}, {"x": "2025-03-24", "y": 33}, {"x": "2025-03-28", "y": 33}, {"x": "2025-03-31", "y": 33}, {"x": "2025-04-02", "y": 33}, {"x": "2025-04-04", "y": 33}, {"x": "2025-04-19", "y": 33}, {"x": "2025-07-27", "y": 33}, {"x": "2025-07-29", "y": 33}, {"x": "2025-08-05", "y": 33}, {"x": "2025-08-10", "y": 33}, {"x": "2025-08-13", "y": 33}, {"x": "2025-08-19", "y": 33}, {"x": "2025-08-25", "y": 33}, {"x": "2025-08-28", "y": 33}, {"x": "2025-08-29", "y": 33}, {"x": "2025-09-01", "y": 33}, {"x": "2025-09-15", "y": 33}, {"x": "2025-09-16", "y": 33}, {"x": "2025-09-19", "y": 35}, {"x": "2025-09-22", "y": 35}, {"x": "2025-09-23", "y": 35}, {"x": "2025-09-24", "y": 35}, {"x": "2025-09-26", "y": 35}, {"x": "2025-09-27", "y": 35}, {"x": "2025-10-02", "y": 35}, {"x": "2025-10-07", "y": 35}, {"x": "2025-10-12", "y": 35}, {"x": "2025-10-14", "y": 35}, {"x": "2025-10-22", "y": 35}, {"x": "2025-10-23", "y": 35}, {"x": "2025-10-27", "y": 35}, {"x": "2025-10-30", "y": 35}, {"x": "2025-11-08", "y": 35}, {"x": "2025-11-21", "y": 35}, {"x": "2025-11-30", "y": 35}, {"x": "2025-12-01", "y": 35}, {"x": "2025-12-23", "y": 35}, {"x": "2025-12-29", "y": 35}, {"x": "2025-12-31", "y": 35}, {"x": "2026-01-09", "y": 35}, {"x": "2026-01-16", "y": 35}]}, "KSQL": {"name": "KSQL", "data": [{"x": "2025-01-25", "y": 1}, {"x": "2025-02-17", "y": 2}, {"x": "2025-02-19", "y": 3}, {"x": "2025-03-10", "y": 4}, {"x": "2025-03-21", "y": 5}, {"x": "2025-03-24", "y": 6}, {"x": "2025-03-28", "y": 7}, {"x": "2025-03-31", "y": 8}, {"x": "2025-04-02", "y": 9}, {"x": "2025-04-04", "y": 10}, {"x": "2025-04-19", "y": 11}, {"x": "2025-07-27", "y": 11}, {"x": "2025-07-29", "y": 11}, {"x": "2025-08-05", "y": 11}, {"x": "2025-08-10", "y": 11}, {"x": "2025-08-13", "y": 11}, {"x": "2025-08-19", "y": 11}, {"x": "2025-08-25", "y": 11}, {"x": "2025-08-28", "y": 11}, {"x": "2025-08-29", "y": 11}, {"x": "2025-09-01", "y": 11}, {"x": "2025-09-15", "y": 11}, {"x": "2025-09-16", "y": 11}, {"x": "2025-09-19", "y": 11}, {"x": "2025-09-22", "y": 11}, {"x": "2025-09-23", "y": 11}, {"x": "2025-09-24", "y": 11}, {"x": "2025-09-26", "y": 11}, {"x": "2025-09-27", "y": 11}, {"x": "2025-10-02", "y": 11}, {"x": "2025-10-07", "y": 11}, {"x": "2025-10-12", "y": 11}, {"x": "2025-10-14", "y": 11}, {"x": "2025-10-22", "y": 11}, {"x": "2025-10-23", "y": 11}, {"x": "2025-10-27", "y": 11}, {"x": "2025-10-30", "y": 11}, {"x": "2025-11-08", "y": 11}, {"x": "2025-11-21", "y": 11}, {"x": "2025-11-30", "y": 11}, {"x": "2025-12-01", "y": 11}, {"x": "2025-12-23", "y": 11}, {"x": "2025-12-29", "y": 11}, {"x": "2025-12-31", "y": 11}, {"x": "2026-01-09", "y": 11}, {"x": "2026-01-16", "y": 11}]}, "KBFI": {"name": "KBFI", "data": [{"x": "2025-07-27", "y": 1}, {"x": "2025-07-29", "y": 2}, {"x": "2025-08-05", "y": 3}, {"x": "2025-08-10", "y": 4}, {"x": "2025-08-13", "y": 5}, {"x": "2025-08-19", "y": 6}, {"x": "2025-08-25", "y": 7}, {"x": "2025-08-28", "y": 8}, {"x": "2025-08-29", "y": 9}, {"x": "2025-09-01", "y": 10}, {"x": "2025-09-15", "y": 11}, {"x": "2025-09-16", "y": 12}, {"x": "2025-09-19", "y": 13}, {"x": "2025-09-22", "y": 14}, {"x": "2025-09-23", "y": 15}, {"x": "2025-09-24", "y": 16}, {"x": "2025-09-26", "y": 17}, {"x": "2025-09-27", "y": 18}, {"x": "2025-10-02", "y": 19}, {"x": "2025-10-07", "y": 20}, {"x": "2025-10-12", "y": 21}, {"x": "2025-10-14", "y": 22}, {"x": "2025-10-22", "y": 23}, {"x": "2025-10-23", "y": 24}, {"x": "2025-10-27", "y": 25}, {"x": "2025-10-30", "y": 26}, {"x": "2025-11-08", "y": 26}, {"x": "2025-11-21", "y": 27}, {"x": "2025-11-30", "y": 27}, {"x": "2025-12-01", "y": 27}, {"x": "2025-12-23", "y": 28}, {"x": "2025-12-29", "y": 29}, {"x": "2025-12-31", "y": 30}, {"x": "2026-01-09", "y": 30}, {"x": "2026-01-16", "y": 30}]}, "KS50": {"name": "KS50", "data": [{"x": "2025-11-08", "y": 1}, {"x": "2025-11-21", "y": 1}, {"x": "2025-11-30", "y": 2}, {"x": "2025-12-01", "y": 3}, {"x": "2025-12-23", "y": 3}, {"x": "2025-12-29", "y": 3}, {"x": "2025-12-31", "y": 3}, {"x": "2026-01-09", "y": 4}, {"x": "2026-01-16", "y": 5}]}, "KHQM": {"name": "KHQM", "data": [{"x": "2026-01-16", "y": 1}]}}, "progression_data": [{"date": "2021-04-05", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 1}, {"date": "2023-08-16", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 2}, {"date": "2023-11-02", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 3}, {"date": "2024-03-27", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 4}, {"date": "2024-03-28", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 5}, {"date": "2024-04-02", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 6}, {"date": "2024-04-03", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 7}, {"date": "2024-04-05", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 8}, {"date": "2024-04-10", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 9}, {"date": "2024-04-30", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 10}, {"date": "2024-05-09", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 11}, {"date": "2024-05-30", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 12}, {"date": "2024-06-10", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 13}, {"date": "2024-06-24", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 14}, {"date": "2024-07-09", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 15}, {"date": "2024-07-11", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 16}, {"date": "2024-07-12", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 17}, {"date": "2024-07-15", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 18}, {"date": "2024-07-16", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 19}, {"date": "2024-07-17", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 20}, {"date": "2024-07-24", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 21}, {"date": "2024-07-31", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 22}, {"date": "2024-08-05", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 23}, {"date": "2024-08-07", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 24}, {"date": "2024-08-10", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 25}, {"date": "2024-08-12", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 26}, {"date": "2024-08-12", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 27}, {"date": "2024-08-19", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 28}, {"date": "2024-08-21", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 29}, {"date": "2024-08-25", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 30}, {"date": "2024-08-26", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 31}, {"date": "2024-08-27", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 32}, {"date": "2024-08-28", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 33}, {"date": "2025-01-25", "airport_code": "KSQL", "airport_name": "San Carlos Airport", "count": 1}, {"date": "2025-02-17", "airport_code": "KSQL", "airport_name": "San Carlos Airport", "count": 2}, {"date": "2025-02-19", "airport_code": "KSQL", "airport_name": "San Carlos Airport", "count": 3}, {"date": "2025-03-10", "airport_code": "KSQL", "airport_name": "San Carlos Airport", "count": 4}, {"date": "2025-03-21", "airport_code": "KSQL", "airport_name": "San Carlos Airport", "count": 5}, {"date": "2025-03-24", "airport_code": "KSQL", "airport_name": "San Carlos Airport", "count": 6}, {"date": "2025-03-28", "airport_code": "KSQL", "airport_name": "San Carlos Airport", "count": 7}, {"date": "2025-03-31", "airport_code": "KSQL", "airport_name": "San Carlos Airport", "count": 8}, {"date": "2025-04-02", "airport_code": "KSQL", "airport_name": "San Carlos Airport", "count": 9}, {"date": "2025-04-04", "airport_code": "KSQL", "airport_name": "San Carlos Airport", "count": 10}, {"date": "2025-04-19", "airport_code": "KSQL", "airport_name": "San Carlos Airport", "count": 11}, {"date": "2025-07-27", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 1}, {"date": "2025-07-29", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 2}, {"date": "2025-08-05", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 3}, {"date": "2025-08-10", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 4}, {"date": "2025-08-13", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 5}, {"date": "2025-08-19", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 6}, {"date": "2025-08-25", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 7}, {"date": "2025-08-28", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 8}, {"date": "2025-08-29", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 9}, {"date": "2025-09-01", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 10}, {"date": "2025-09-15", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 11}, {"date": "2025-09-16", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 12}, {"date": "2025-09-19", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 13}, {"date": "2025-09-19", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 34}, {"date": "2025-09-19", "airport_code": "KRNT", "airport_name": "Renton Municipal Airport", "count": 35}, {"date": "2025-09-22", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 14}, {"date": "2025-09-23", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 15}, {"date": "2025-09-24", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 16}, {"date": "2025-09-26", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 17}, {"date": "2025-09-27", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 18}, {"date": "2025-10-02", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 19}, {"date": "2025-10-07", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 20}, {"date": "2025-10-12", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 21}, {"date": "2025-10-14", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 22}, {"date": "2025-10-22", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 23}, {"date": "2025-10-23", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 24}, {"date": "2025-10-27", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 25}, {"date": "2025-10-30", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 26}, {"date": "2025-11-08", "airport_code": "KS50", "airport_name": "Auburn Municipal Airport", "count": 1}, {"date": "2025-11-21", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 27}, {"date": "2025-11-30", "airport_code": "KS50", "airport_name": "Auburn Municipal Airport", "count": 2}, {"date": "2025-12-01", "airport_code": "KS50", "airport_name": "Auburn Municipal Airport", "count": 3}, {"date": "2025-12-23", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 28}, {"date": "2025-12-29", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 29}, {"date": "2025-12-31", "airport_code": "KBFI", "airport_name": "Boeing Field King County International Airport", "count": 30}, {"date": "2026-01-09", "airport_code": "KS50", "airport_name": "Auburn Municipal Airport", "count": 4}, {"date": "2026-01-16", "airport_code": "KS50", "airport_name": "Auburn Municipal Airport", "count": 5}, {"date": "2026-01-16", "airport_code": "KHQM", "airport_name": "Bowerman Airport", "count": 1}]};

    // Aviation color palette for airports
    const airportColors = [
        'rgba(205, 127, 50, 1)',    // Bronze
        'rgba(44, 74, 107, 1)',     // Blue
        'rgba(181, 166, 66, 1)',    // Brass
        'rgba(74, 93, 79, 1)',      // Green
        'rgba(139, 111, 71, 1)',    // Leather
        'rgba(139, 46, 46, 1)',     // Red
        'rgba(181, 101, 29, 1)',    // Dark Bronze
        'rgba(139, 90, 43, 1)',     // Dark Leather
        'rgba(58, 71, 63, 1)',      // Dark Green
        'rgba(34, 56, 81, 1)'       // Dark Blue
    ];

    // Build datasets for each airport
    const airportDatasets = [];
    let airportColorIndex = 0;

    for (const airportCode in airportProgressionData.airports) {
        const airport = airportProgressionData.airports[airportCode];
        const color = airportColors[airportColorIndex % airportColors.length];

        airportDatasets.push({
            label: airport.name,
            data: airport.data,
            borderColor: color,
            backgroundColor: color.replace('1)', '0.2)'),
            fill: false,
            tension: 0.1,
            pointRadius: 3,
            pointHoverRadius: 5
        });

        airportColorIndex++;
    }

    new Chart(airportProgressionCtx, {
        type: 'line',
        data: {
            datasets: airportDatasets
        },
        options: {
            responsive: true,
            maintainAspectRatio: true,
            interaction: {
                mode: 'index',
                intersect: false
            },
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Number of Departures'
                    },
                    ticks: {
                        stepSize: 1
                    }
                },
                x: {
                    type: 'time',
                    time: {
                        unit: 'month',
                        displayFormats: {
                            month: 'MMM yyyy'
                        }
                    },
                    title: {
                        display: true,
                        text: 'Date'
                    }
                }
            },
            plugins: {
                legend: {
                    position: 'bottom'
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            return context.dataset.label + ': ' + context.parsed.y + ' departures';
                        }
                    }
                }
            }
        }
    });
    
</script>

</body>
</html>
